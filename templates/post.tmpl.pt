<!DOCTYPE html>
<html metal:use-macro="context/@@base.tmpl/index/macros/base"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
	  xmlns:metal="http://xml.zope.org/namespaces/metal">

<!-- <%namespace name="helper" file="post_helper.tmpl"/> -->
<!-- <%namespace name="pheader" file="post_header.tmpl"/> -->
<!-- <%namespace name="comments" file="comments_helper.tmpl"/> -->
<!-- <%namespace name="math" file="math_helper.tmpl"/> -->
<!-- <%inherit file="base.tmpl"/> -->

<metal:block metal:define-macro="post_extra_head">
    <meta tal:condition="python:context.meta('keywords')"
          name="keywords"
          content="${python:context.meta('keywords')}" />
    <meta name="author" content="${context/author}" />
    <link tal:condition="context/prev_post"
		  rel="prev" href="${context/prev_post/permalink}"
		  title="${context/prev_post/title}" type="text/html" />
        <link tal:condition="context/next_post"
			  rel="next" href="${context/next_post/permalink}"
			  title="${context/next_post/title}"
			  type="text/html" />

    <meta tal:condition="context/is_draft" name="robots"
          content="noindex" />
    <metal:block use-macro="macro:open_graph_metadata" />
    <metal:block use-macro="macro:twitter_card_information" />
    <metal:block use-macro="macro:meta_translations" />
    <metal:block use-macro="macro:math_styles_ifpost" />
</metal:block>

<metal:block fill-slot="extra_head">
  <metal:block metal:use-macro="template/macros/post_extra_head" />
</metal:block>


<article metal:fill-slot="content"
		 tal:define="post context"
		 class="post-${python:context.meta('type')} h-entry hentry
				postpage"
		 itemscope="itemscope" itemtype="http://schema.org/Article">
  <metal:block metal:use-macro="macro:html_post_header" />
    <div class="e-content entry-content" itemprop="articleBody text">
    ${structure:context/text}
    </div>
    <aside class="postpromonav">
    <nav>
      <metal:block use-macro="macro:html_tags" />
      <metal:block use-macro="macro:html_pager" />
    </nav>
    </aside>
    <section class="comments hidden-print"
			 tal:define="site_has_comments options/site_has_comments"
			 tal:condition="python: not context.meta('nocomments') and site_has_comments">
        <h2 i18n:translate="">Comments</h2>
        ${python:options['comments'].comment_form(context.permalink(absolute=True), context.title(), context._base_path)}
        </section>
    <metal:block use-macro="macro:math_scripts_ifpost" />
</article>
<!--! ${comments.comment_link_script()} -->
</html>
